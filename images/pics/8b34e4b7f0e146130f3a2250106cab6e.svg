<svg id="mermaidChart0" width="100%" xmlns="http://www.w3.org/2000/svg" height="100%" style="max-width:1550px;" viewBox="-50 -50 1550 1789"><style type="text/css" title="mermaid-svg-internal-css">/*  */
*, ::before, ::after { box-sizing: border-box;}
.actor { fill: rgb(216, 232, 236); stroke: rgb(122, 130, 136);}
text.actor { fill: rgb(122, 130, 136); stroke: none;}
.note { fill: rgb(192, 216, 157);}
.noteText { fill: rgb(0, 0, 0);}
/*  */
</style><g></g><g><line id="actor0" x1="100" y1="5" x2="100" y2="1738" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="100" y="37.5" class="actor" style="text-anchor: middle;">Deck</text></g><g><line id="actor1" x1="350" y1="5" x2="350" y2="1738" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="250" y="0" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="350" y="37.5" class="actor" style="text-anchor: middle;">Gate</text></g><g><line id="actor2" x1="600" y1="5" x2="600" y2="1738" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="500" y="0" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="600" y="37.5" class="actor" style="text-anchor: middle;">Orca</text></g><g><line id="actor3" x1="850" y1="5" x2="850" y2="1738" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="750" y="0" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="850" y="37.5" class="actor" style="text-anchor: middle;">Clouddriver</text></g><g><line id="actor4" x1="1100" y1="5" x2="1100" y2="1738" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1000" y="0" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="1100" y="37.5" class="actor" style="text-anchor: middle;">Redis</text></g><g><line id="actor5" x1="1350" y1="5" x2="1350" y2="1738" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1250" y="0" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="1350" y="37.5" class="actor" style="text-anchor: middle;">Cloud</text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><text x="225" y="133" class="messageText" style="text-anchor: middle;">Initiate Deploy orchestration</text><line x1="100" y1="140" x2="350" y2="140" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="345" y="142" fill="#f4f4f4" stroke="#666" width="10" height="298" rx="0" ry="0"></rect></g><g><text x="477.5" y="208" class="messageText" style="text-anchor: middle;">Initiate Deploy orchestration</text><line x1="355" y1="215" x2="600" y2="215" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="595" y="217" fill="#f4f4f4" stroke="#666" width="10" height="148" rx="0" ry="0"></rect></g><g><text x="852.5" y="283" class="messageText" style="text-anchor: middle;">Persist new execution</text><line x1="605" y1="290" x2="1100" y2="290" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="475" y="358" class="messageText" style="text-anchor: middle;">Reply with orchestration id</text><line x1="595" y1="365" x2="355" y2="365" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="222.5" y="433" class="messageText" style="text-anchor: middle;">Reply with orchestration id</text><line x1="345" y1="440" x2="100" y2="440" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="625" y="450" fill="#EDF2AE" stroke="#666" width="200" height="48" rx="0" ry="0" class="note"></rect><text x="641" y="490" fill="black" class="noteText"><tspan x="641">In worker thread</tspan></text></g><g><text x="725" y="566" class="messageText" style="text-anchor: middle;">Initiate Deploy operation</text><line x1="600" y1="573" x2="850" y2="573" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="845" y="575" fill="#f4f4f4" stroke="#666" width="10" height="148" rx="0" ry="0"></rect></g><g><text x="977.5" y="641" class="messageText" style="text-anchor: middle;">Persist new task</text><line x1="855" y1="648" x2="1100" y2="648" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="722.5" y="716" class="messageText" style="text-anchor: middle;">Reply with task id</text><line x1="845" y1="723" x2="600" y2="723" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="1100" y="791" class="messageText" style="text-anchor: middle;">Mutating calls</text><line x1="850" y1="798" x2="1350" y2="798" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#crosshead)" style="fill: none;"></line></g><g><rect x="845" y="800" fill="#f4f4f4" stroke="#666" width="10" height="73" rx="0" ry="0"></rect></g><g><text x="977.5" y="866" class="messageText" style="text-anchor: middle;">Mark task completed</text><line x1="855" y1="873" x2="1100" y2="873" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="725" y="966" class="messageText" style="text-anchor: middle;">Poll until task completion</text><line x1="600" y1="973" x2="850" y2="973" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="975" y="1041" class="messageText" style="text-anchor: middle;">Query task status</text><line x1="850" y1="1048" x2="1100" y2="1048" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="850" y="1116" class="messageText" style="text-anchor: middle;">Update execution state</text><line x1="600" y1="1123" x2="1100" y2="1123" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><line x1="590" y1="883" x2="1110" y2="883" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="1110" y1="883" x2="1110" y2="1133" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="590" y1="1133" x2="1110" y2="1133" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="590" y1="883" x2="590" y2="1133" stroke-width="2" stroke="#526e52" class="loopLine"></line><rect x="590" y="883" fill="#526e52" stroke="none" width="50" height="20" rx="0" ry="0" class="labelBox"></rect><text x="597.5" y="898" fill="white" class="labelText"><tspan x="597.5">loop</tspan></text><text x="850" y="898" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="850">[ In worker thread ]</tspan></text></g><g><text x="725" y="1226" class="messageText" style="text-anchor: middle;">Poll until instances are up</text><line x1="600" y1="1233" x2="850" y2="1233" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="975" y="1301" class="messageText" style="text-anchor: middle;">Query server group/instance state from cache</text><line x1="850" y1="1308" x2="1100" y2="1308" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="850" y="1376" class="messageText" style="text-anchor: middle;">Mark execution completed</text><line x1="600" y1="1383" x2="1100" y2="1383" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><line x1="590" y1="1143" x2="1110" y2="1143" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="1110" y1="1143" x2="1110" y2="1393" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="590" y1="1393" x2="1110" y2="1393" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="590" y1="1143" x2="590" y2="1393" stroke-width="2" stroke="#526e52" class="loopLine"></line><rect x="590" y="1143" fill="#526e52" stroke="none" width="50" height="20" rx="0" ry="0" class="labelBox"></rect><text x="597.5" y="1158" fill="white" class="labelText"><tspan x="597.5">loop</tspan></text><text x="850" y="1158" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="850">[ In worker thread ]</tspan></text></g><g><text x="225" y="1486" class="messageText" style="text-anchor: middle;">Poll until orchestration completion</text><line x1="100" y1="1493" x2="350" y2="1493" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="475" y="1561" class="messageText" style="text-anchor: middle;">Query orchestration status</text><line x1="350" y1="1568" x2="600" y2="1568" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="850" y="1636" class="messageText" style="text-anchor: middle;">Query execution status</text><line x1="600" y1="1643" x2="1100" y2="1643" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><line x1="90" y1="1403" x2="1110" y2="1403" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="1110" y1="1403" x2="1110" y2="1653" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="90" y1="1653" x2="1110" y2="1653" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="90" y1="1403" x2="90" y2="1653" stroke-width="2" stroke="#526e52" class="loopLine"></line><rect x="90" y="1403" fill="#526e52" stroke="none" width="50" height="20" rx="0" ry="0" class="labelBox"></rect><text x="97.5" y="1418" fill="white" class="labelText"><tspan x="97.5">loop</tspan></text><text x="600" y="1418" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="600">[ In background thread ]</tspan></text></g><g><rect x="0" y="1673" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="100" y="1710.5" class="actor" style="text-anchor: middle;">Deck</text></g><g><rect x="250" y="1673" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="350" y="1710.5" class="actor" style="text-anchor: middle;">Gate</text></g><g><rect x="500" y="1673" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="600" y="1710.5" class="actor" style="text-anchor: middle;">Orca</text></g><g><rect x="750" y="1673" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="850" y="1710.5" class="actor" style="text-anchor: middle;">Clouddriver</text></g><g><rect x="1000" y="1673" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="1100" y="1710.5" class="actor" style="text-anchor: middle;">Redis</text></g><g><rect x="1250" y="1673" fill="#eaeaea" stroke="#666" width="200" height="65" rx="3" ry="3" class="actor"></rect><text x="1350" y="1710.5" class="actor" style="text-anchor: middle;">Cloud</text></g><text x="625" y="-25">Life of a Deployment</text></svg>