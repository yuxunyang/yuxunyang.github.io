<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>遇寻笔记</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="遇寻笔记"><meta name="msapplication-TileImage" content="/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="遇寻笔记"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="No. I&amp;#39;ll bring me back a souvenir."><meta property="og:type" content="website"><meta property="og:title" content="遇寻笔记"><meta property="og:url" content="https://eucham.me/"><meta property="og:site_name" content="遇寻笔记"><meta property="og:description" content="No. I&amp;#39;ll bring me back a souvenir."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://eucham.me/img/og_image.png"><meta property="article:author" content="遇寻"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://eucham.me"},"headline":"遇寻笔记","image":["https://eucham.me/img/og_image.png"],"author":{"@type":"Person","name":"遇寻"},"publisher":{"@type":"Organization","name":"遇寻笔记","logo":{"@type":"ImageObject","url":"https://eucham.me/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png"}},"description":"No. I&#39;ll bring me back a souvenir."}</script><link rel="icon" href="/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?7d79380bb26079f6dd33da78e83cf2ab";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png" alt="遇寻笔记" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/categories/AI">AI</a><a class="navbar-item" href="/categories/Kubernetes">Kubernetes</a><a class="navbar-item" href="/categories/Openstack">Openstack</a><a class="navbar-item" href="/categories/Docker">Container</a><a class="navbar-item" href="/categories/Golang">Golang</a><a class="navbar-item" href="/categories/Rust">Rust</a><a class="navbar-item" href="/about.html">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="To Find Me" href="https://github.com/eucham"><i class="fab fa-github"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/eucham"><i class="fab fa-linkedin"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-28T19:58:54.000Z" title="4/29/2018, 3:58:54 AM">2018-04-29</time>发表</span><span class="level-item"><time dateTime="2022-01-01T07:45:42.003Z" title="1/1/2022, 3:45:42 PM">2022-01-01</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">6 分钟读完 (大约828个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/29/779d4e5acb73.html">EventBus3的基本使用指南</a></h1><div class="content">使用EventBus可以省略繁杂的Handler，效果也是类似的，使用方法也很简单。这里从官网上面做一个小小的总结，可以看得更全面一些。入门贴官方教程定义事件事件就是一个普通的Java类，POJO就好。public class MessageEvent {    public final Strin</div><a class="article-more button is-small is-size-7" href="/2018/04/29/779d4e5acb73.html#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-28T18:55:06.000Z" title="4/29/2018, 2:55:06 AM">2018-04-29</time>发表</span><span class="level-item"><time dateTime="2021-02-09T03:03:53.729Z" title="2/9/2021, 11:03:53 AM">2021-02-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">1 分钟读完 (大约214个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/29/1aa78a1af661.html">关于Bitmap相关的一些总结</a></h1><div class="content"><h3 id="如何从当前View获取到Bitmap"><a href="#如何从当前View获取到Bitmap" class="headerlink" title="如何从当前View获取到Bitmap"></a>如何从当前View获取到Bitmap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v.setDrawingCacheEnabled(<span class="keyword">true</span>);</span><br><span class="line">v.buildDrawingCache();</span><br><span class="line">Bitmap bitmap = v.getDrawingCache();</span><br></pre></td></tr></table></figure>

<h3 id="如何从TextureView中获取Bitmap"><a href="#如何从TextureView中获取Bitmap" class="headerlink" title="如何从TextureView中获取Bitmap"></a>如何从TextureView中获取Bitmap</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mTextureView.getBitmap();</span><br></pre></td></tr></table></figure>

<h3 id="如何压缩Bitmap"><a href="#如何压缩Bitmap" class="headerlink" title="如何压缩Bitmap"></a>如何压缩Bitmap</h3><p>压缩成适配目标宽、高的Bitmap</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * get a scaled bitmap from a file located in path, adjust to destWidth and destHeight</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> path the bitmap&#x27;s file location</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destWidth destination width</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destHeight destination height</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a scaled bitmap</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bitmap <span class="title">getScaledBitmap</span><span class="params">(String path, <span class="keyword">int</span> destWidth, <span class="keyword">int</span> destHeight)</span></span>&#123;</span><br><span class="line">    BitmapFactory.Options options = <span class="keyword">new</span> BitmapFactory.Options();</span><br><span class="line">    options.inJustDecodeBounds = <span class="keyword">true</span>;</span><br><span class="line">    BitmapFactory.decodeFile(path, options);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">float</span> srcWidth = options.outWidth;</span><br><span class="line">    <span class="keyword">float</span> srcHeight = options.outHeight;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> inSampleSize = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (srcHeight &gt; destHeight || srcWidth &gt; destWidth)&#123;</span><br><span class="line">        <span class="keyword">float</span> heightScale = srcHeight / destHeight;</span><br><span class="line">        <span class="keyword">float</span> widthScale = srcWidth / destWidth;</span><br><span class="line"></span><br><span class="line">        inSampleSize = Math.round(heightScale &gt; widthScale ? heightScale : widthScale);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    options = <span class="keyword">new</span> BitmapFactory.Options();</span><br><span class="line">    options.inSampleSize = inSampleSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> BitmapFactory.decodeFile(path, options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="如何将Bitmap与byte-相互转换"><a href="#如何将Bitmap与byte-相互转换" class="headerlink" title="如何将Bitmap与byte[]相互转换"></a>如何将Bitmap与byte[]相互转换</h3><p>从Bitmap到byte[]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> bytes = bmp.getByteCount();</span><br><span class="line">ByteBuffer buf = ByteBuffer.allocate(bytes);</span><br><span class="line">bmp.copyPixelsToBuffer(buf);</span><br><span class="line"><span class="keyword">byte</span>[] byteArray = buf.array();</span><br></pre></td></tr></table></figure>
<p>从byte[]到Bitmap</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Bitmap stitchBmp = Bitmap.createBitmap(width, height, type);</span><br><span class="line">stitchBmp.copyPixelsFromBuffer(ByteBuffer.wrap(byteArray));</span><br><span class="line">imageView.setImageBitmap(stitchBmp);</span><br></pre></td></tr></table></figure>

<h3 id="缩略图相关"><a href="#缩略图相关" class="headerlink" title="缩略图相关"></a>缩略图相关</h3><p><a target="_blank" rel="noopener" href="http://jayfeng.com/2016/03/16/%E7%90%86%E8%A7%A3ThumbnailUtils/">理解ThumbnaiUtils</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-19T11:15:00.000Z" title="4/19/2018, 7:15:00 PM">2018-04-19</time>发表</span><span class="level-item"><time dateTime="2021-02-09T03:03:51.378Z" title="2/9/2021, 11:03:51 AM">2021-02-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></span><span class="level-item">9 分钟读完 (大约1407个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/19/858b4c830e1e.html">安卓系统应用调试脚本</a></h1><div class="content"><blockquote>
<p>这是一个对之前写的脚本的记录档案，自己也看不太懂当时的写法了，羞愧。用一个 repo 放这些脚本代码感觉有些浪费，干脆整个文章记录曾经的那段历史吧！</p>
</blockquote>
<p>这代码的主要目的就是想少敲点命令，一步到位，做一个快男！</p>
<h2 id="说明-AndroidROMTools"><a href="#说明-AndroidROMTools" class="headerlink" title="说明 - AndroidROMTools"></a>说明 - AndroidROMTools</h2><p>Android run script tools for debugging system apps or frameworks. This was used by myself when debugging system apps or frameworks. In this project, module names was not given to avoid the project name, but the main structure was reminded.</p>
<p>此脚本主要分成一个入口与两个模块，详细的树状图如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── README.md</span><br><span class="line">├── btool</span><br><span class="line">├── modules</span><br><span class="line">│   ├── handleFramework.sh</span><br><span class="line">│   ├── handleXxxx.sh</span><br><span class="line">│   └── handleXxxxxx.sh</span><br><span class="line">└── utils</span><br><span class="line">    ├── handleSpecificTask.sh</span><br><span class="line">    ├── init.sh</span><br><span class="line">    ├── printOperationTip.sh</span><br><span class="line">    ├── tipWhenNotImplement.sh</span><br><span class="line">    └── tipWhenParametersError.sh</span><br><span class="line"></span><br><span class="line">2 directories, 10 files</span><br></pre></td></tr></table></figure>

<h2 id="入口"><a href="#入口" class="headerlink" title="入口"></a>入口</h2><p>名字叫 <code>btool</code>，为啥起这个怪名字，我也不知道。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> initialize variables</span></span><br><span class="line">var1=$1</span><br><span class="line">var2=$2</span><br><span class="line">var3=$3</span><br><span class="line">UTILS_DIR=~/.PersonalTools/utils</span><br><span class="line">MODULES_DIR=~/.PersonalTools/modules</span><br><span class="line"></span><br><span class="line">case $var1 in</span><br><span class="line">    &quot;init&quot; )</span><br><span class="line">        $&#123;UTILS_DIR&#125;/init.sh</span><br><span class="line">        ;;</span><br><span class="line">    &quot;log&quot; )</span><br><span class="line">        adb logcat -b main \*:E | grep &quot;TAG&quot;</span><br><span class="line">        ;;</span><br><span class="line">    &quot;wxxxx&quot; )</span><br><span class="line">        $&#123;MODULES_DIR&#125;/handleXXXX.sh $var2 $var3</span><br><span class="line">        ;;</span><br><span class="line">    &quot;txxxx&quot; )</span><br><span class="line">        $&#123;MODULES_DIR&#125;/handlexxxxxx.sh $var2 $var3</span><br><span class="line">        #$&#123;UTILS_DIR&#125;/tipWhenNotImplement.sh $var1</span><br><span class="line">        ;;</span><br><span class="line">    &quot;txxxx&quot; )</span><br><span class="line">        $&#123;UTILS_DIR&#125;/tipWhenNotImplement.sh $var1</span><br><span class="line">        ;;</span><br><span class="line">    &quot;mxxxx&quot;  )</span><br><span class="line">        $&#123;UTILS_DIR&#125;/tipWhenNotImplement.sh $var1</span><br><span class="line">        ;;    </span><br><span class="line">	*	) </span><br><span class="line"><span class="meta">		#</span><span class="bash"><span class="variable">$&#123;UTILS_DIR&#125;</span>/tipWhenParametersError.sh init xxxxxx *xxxxxx* *xxxxxx* *xxxxxx*</span></span><br><span class="line">        if [ &quot;$&#123;var1&#125;&quot; == &quot;&quot; ]; then</span><br><span class="line">            $&#123;UTILS_DIR&#125;/tipWhenParametersError.sh init xxxx *xxxx* *xxxxxx* *xxxxxx*</span><br><span class="line">        elif [ -f $&#123;MODULES_DIR&#125;/$var1.sh ]; then</span><br><span class="line">            #$&#123;UTILS_DIR&#125;/tipWhenParametersError.sh init xxxxxx *xxxxxx* *xxxxxx* *xxxxxx*</span><br><span class="line">            $&#123;MODULES_DIR&#125;/$var1.sh</span><br><span class="line">        else</span><br><span class="line">            $&#123;UTILS_DIR&#125;/tipWhenParametersError.sh init xxxxxx *txxxxxx* *txxxxxx* *mxxxxxx*</span><br><span class="line">            $&#123;UTILS_DIR&#125;/tipWhenNotImplement.sh &quot;$&#123;var1&#125;&quot;</span><br><span class="line">        fi</span><br><span class="line">		;;</span><br><span class="line">esac</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<h2 id="Utils"><a href="#Utils" class="headerlink" title="Utils"></a>Utils</h2><ul>
<li><p>初始化：<code>init.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">adb root</span><br><span class="line">adb wait-for-device remount</span><br></pre></td></tr></table></figure>
</li>
<li><p>打印带颜色的字符：<code>printOperationTip.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">echo</span> -e <span class="string">&quot;\e[31;43m-----------------------------------------------------------\e[0m&quot;</span></span></span><br><span class="line">echo &quot;&quot;</span><br><span class="line">echo -e &quot;\e[31;47m\t&quot;$1&quot;\t\e[0m&quot;</span><br><span class="line">echo &quot;&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">echo</span> -e <span class="string">&quot;\e[31;43m-----------------------------------------------------------\e[0m&quot;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>模块未完成的告警提示：<code>tipWhenNotImplement.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/bin/bash</span></span><br><span class="line">echo -e &quot;\nModule &lt; \e[41m$1\e[0m \e[31m&gt;NOT IMPELEMNT!\e[0m\n&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>参数错误提示：<code>tipWhenParametersError.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">clear</span></span><br><span class="line">echo &quot;&quot;</span><br><span class="line">echo -e &quot;\e[31;42mOops! Please give me the \e[0m\e[1;5;40;31mcorrect\e[0m\e[31;42m parameters!!!\e[0m&quot;</span><br><span class="line">echo &quot;&quot;</span><br><span class="line"></span><br><span class="line">params=&quot;&quot;</span><br><span class="line">cnt=1;</span><br><span class="line">for i in $@;</span><br><span class="line">do</span><br><span class="line">	if [ $cnt != 1 ]; then</span><br><span class="line">		params=$params&quot;,\e[1;5;31;40m &quot;$i&quot; \e[0m&quot;</span><br><span class="line">	else</span><br><span class="line">		params=&quot;\e[1;5;31;40m &quot;$i&quot; \e[0m&quot;</span><br><span class="line">	fi</span><br><span class="line">	cnt=$(($cnt+1))</span><br><span class="line">done</span><br><span class="line">if [  $cnt == 1 ]; then</span><br><span class="line">	params=&quot;\e[4;31mNONE\e[0m&quot;</span><br><span class="line">fi</span><br><span class="line">echo -e &quot;\e[33mavaliable parameters are :\e[0m&quot; $params&quot;\n&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>处理特定任务：<code>handleSpecificTask.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">UTILS_DIR=~/.PersonalTools/utils</span><br><span class="line"></span><br><span class="line">OP_INDEX=$1</span><br><span class="line">PROJECT_SRC_DIR=$2</span><br><span class="line">APP_SRC_DIR=$3</span><br><span class="line">APP_OUT_DIR=$4</span><br><span class="line">APP_REMOTE_DIR=$5</span><br><span class="line">APP_PKG_NAME=$6</span><br><span class="line">PROJECT_LUNCH_IDX=$7</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span>; <span class="keyword">do</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash">statements</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	<span class="built_in">echo</span> <span class="variable">$i</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">done</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> compile SnapCamera APK <span class="keyword">in</span></span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">if</span> [ -f /tmp/btoollog ]; <span class="keyword">then</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"><span class="built_in">echo</span> <span class="string">&quot;exist&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">else</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"><span class="built_in">echo</span> <span class="string">&quot;/tmp/btoollog not exists&quot;</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash">mkdir /tmp/btoollog</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">fi</span></span></span><br><span class="line"></span><br><span class="line">function compileModifiedSourceCode()&#123;</span><br><span class="line"><span class="meta">	$</span><span class="bash">&#123;UTILS_DIR&#125;/printOperationTip.sh <span class="string">&quot;&lt;Prepare to Compile&gt;&quot;</span></span></span><br><span class="line">	cd $&#123;PROJECT_SRC_DIR&#125;</span><br><span class="line">	pwd</span><br><span class="line">	source build/envsetup.sh</span><br><span class="line">	lunch $&#123;PROJECT_LUNCH_IDX&#125;</span><br><span class="line">	cd $&#123;APP_SRC_DIR&#125;</span><br><span class="line">	pwd</span><br><span class="line">	mm</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function makeSureCloseCompletelyAndReopen()&#123;</span><br><span class="line"><span class="meta">	$</span><span class="bash">&#123;UTILS_DIR&#125;/printOperationTip.sh <span class="string">&quot;&lt;Prepare to force-stop APK&gt;&quot;</span></span></span><br><span class="line"></span><br><span class="line">	echo -e &quot;\n\e[32m\ttry to stop app\e[0m&quot;</span><br><span class="line">	adb shell am force-stop $&#123;APP_PKG_NAME&#125;</span><br><span class="line">	echo -e &quot;&quot;</span><br><span class="line"></span><br><span class="line">	echo -e &quot;\n\e[32m\ttry to start app\e[0m&quot;</span><br><span class="line">	adb shell am start -n $&#123;APP_PKG_NAME&#125;</span><br><span class="line">	echo -e &quot;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function pushCompiledAPK2Phone()&#123;</span><br><span class="line"><span class="meta">	$</span><span class="bash">&#123;UTILS_DIR&#125;/printOperationTip.sh <span class="string">&quot;&lt;Prepare to Push APK&gt;&quot;</span></span></span><br><span class="line">	cd $&#123;APP_OUT_DIR&#125;</span><br><span class="line"><span class="meta">	#</span><span class="bash"><span class="built_in">pwd</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_OUT_DIR&#125;</span>&quot;</span></span></span><br><span class="line">	adb push . $&#123;APP_REMOTE_DIR&#125;</span><br><span class="line"><span class="meta">	#</span><span class="bash">adb push oat/arm64/<span class="variable">$appname</span>.odex /system/priv-app/<span class="variable">$appname</span>/oat/arm64/<span class="variable">$appname</span>.odex</span></span><br><span class="line">	if [ $? -eq 0 ]; then</span><br><span class="line">		echo -e &quot;\n\e[32m\tpush app to phone successfully\e[0m&quot;</span><br><span class="line">	fi</span><br><span class="line">	echo -e &quot;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function checkPushedFilesStatus()&#123;</span><br><span class="line"><span class="meta">	$</span><span class="bash">&#123;UTILS_DIR&#125;/printOperationTip.sh <span class="string">&quot;&lt;Prepare to Check Push Result&gt;&quot;</span></span></span><br><span class="line">	adb shell ls -l $&#123;APP_REMOTE_DIR&#125; $&#123;APP_REMOTE_DIR&#125;/oat/arm64/</span><br><span class="line">	if [ $? -eq 0 ]; then</span><br><span class="line">		echo -e &quot;\n\e[32m\tconnect to phone successfully\e[0m&quot;</span><br><span class="line">	fi</span><br><span class="line">	echo -e &quot;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">&quot;0&quot;  )</span><br><span class="line">	compileModifiedSourceCode</span><br><span class="line">	pushCompiledAPK2Phone</span><br><span class="line">	makeSureCloseCompletelyAndReopen</span><br><span class="line">	checkPushedFilesStatus</span><br><span class="line">	;;</span><br><span class="line">&quot;1&quot; )</span><br><span class="line">	compileModifiedSourceCode</span><br><span class="line">	;;</span><br><span class="line">&quot;2&quot; )</span><br><span class="line">	pushCompiledAPK2Phone</span><br><span class="line">	;;</span><br><span class="line">&quot;3&quot; )</span><br><span class="line">	makeSureCloseCompletelyAndReopen</span><br><span class="line">	;;</span><br><span class="line">&quot;4&quot;	)</span><br><span class="line">	checkPushedFilesStatus</span><br><span class="line">	;;</span><br><span class="line">&quot;subl&quot; )</span><br><span class="line">	subl $&#123;APP_SRC_DIR&#125;</span><br><span class="line">	;;</span><br><span class="line">&quot;src&quot; )</span><br><span class="line">	echo $&#123;APP_SRC_DIR&#125;</span><br><span class="line">	;;</span><br><span class="line">* )</span><br><span class="line"><span class="meta">	$</span><span class="bash">&#123;UTILS_DIR&#125;/tipWhenParametersError.sh 0 1 2 3 4 subl src</span></span><br><span class="line">	echo -e &quot;\t\e[1;4;5;31;40m 0 \e[0m\t : \e[33m1 -&gt; 2 -&gt; 3 -&gt; 4\e[0m&quot;</span><br><span class="line">	echo -e &quot;\t\e[1;4;5;31;40m 1 \e[0m\t : \e[33mCompile Modified Source Code\e[0m&quot;</span><br><span class="line">	echo -e &quot;\t\e[1;4;5;31;40m 2 \e[0m\t : \e[33mPush Compiled APK 2 Phone\e[0m&quot;</span><br><span class="line">	echo -e &quot;\t\e[1;4;5;31;40m 3 \e[0m\t : \e[33mClose App\e[0m&quot;</span><br><span class="line">	echo -e &quot;\t\e[1;4;5;31;40m 4 \e[0m\t : \e[33mShow App Info\e[0m&quot;</span><br><span class="line">	echo -e &quot;\t\e[1;4;5;31;40m subl \e[0m\t : \e[33mOpen App Src With Sublime Text\e[0m\n&quot;</span><br><span class="line">	echo -e &quot;\t\e[1;4;5;31;40m src \e[0m\t : \e[33mPrint SRC path\e[0m\n&quot;</span><br><span class="line">	;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><ul>
<li><p>Android Framework 处理：<code>handleFramework.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">SRC_HOME=/home/ckt/work/xxxxxx/msm8909_go/LINUX/android/frameworks/base</span><br><span class="line">OUT_HOME=/home/ckt/work/xxxxxx/msm8909_go/LINUX/android/out/target/product/msm8909go/system/framework</span><br><span class="line"></span><br><span class="line">cd /home/ckt/work/xxxxxx/msm8909_go/LINUX/android/</span><br><span class="line"></span><br><span class="line">source build/envsetup.sh</span><br><span class="line">lunch 29</span><br><span class="line">make framework</span><br><span class="line">make snod</span><br><span class="line"></span><br><span class="line">adb push $&#123;OUT_HOME&#125;/arm/boot.oat /system/framework/arm/</span><br><span class="line">adb push $&#123;OUT_HOME&#125;/arm/boot.art /system/framework/arm/</span><br><span class="line"></span><br><span class="line">adb push $&#123;OUT_HOME&#125;/framework.jar /system/framework/</span><br><span class="line">adb push $&#123;OUT_HOME&#125;/framework-res.apk /system/framework/</span><br><span class="line"></span><br><span class="line">adb reboot bootloader</span><br></pre></td></tr></table></figure>
</li>
<li><p>桌面时钟：<code>handleXxxx.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/bin/bash</span></span><br><span class="line"></span><br><span class="line">UTILS_DIR=~/.PersonalTools/utils</span><br><span class="line"></span><br><span class="line">PROJECT_DIR=&quot;/home/ckt/work/android8&quot;</span><br><span class="line">PROJECT_SRC_DIR=$&#123;PROJECT_DIR&#125;</span><br><span class="line">PROJECT_OUT_DIR=$&#123;PROJECT_DIR&#125;/out/target/product/msm8953_64</span><br><span class="line">PROJECT_LUNCH_IDX=39</span><br><span class="line"></span><br><span class="line">DESKCLOCK_SRC_DIR=$&#123;PROJECT_SRC_DIR&#125;/packages/apps/DeskClock/</span><br><span class="line">DESKCLOCK_OUT_DIR=$&#123;PROJECT_OUT_DIR&#125;/system/app/DeskClock/</span><br><span class="line">DESKCLOCK_PKG_NAME=com.android.deskclock</span><br><span class="line">DESKCLOCK_REMOTE_DIR=/system/app/DeskClock</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">	&quot;deskclock&quot;	)</span><br><span class="line"><span class="meta">		$</span><span class="bash">&#123;UTILS_DIR&#125;/handleSpecificTask.sh <span class="variable">$2</span> <span class="variable">$&#123;PROJECT_SRC_DIR&#125;</span> <span class="variable">$&#123;DESKCLOCK_SRC_DIR&#125;</span> <span class="variable">$&#123;DESKCLOCK_OUT_DIR&#125;</span> <span class="variable">$&#123;DESKCLOCK_REMOTE_DIR&#125;</span> <span class="variable">$&#123;DESKCLOCK_PKG_NAME&#125;</span> <span class="variable">$&#123;PROJECT_LUNCH_IDX&#125;</span></span></span><br><span class="line">		;;</span><br><span class="line">	* )</span><br><span class="line"><span class="meta">		$</span><span class="bash">&#123;UTILS_DIR&#125;/tipWhenParametersError.sh deskclock</span></span><br><span class="line">		;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
</li>
<li><p>多媒体应用：<code>handleXxxxxx.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">UTILS_DIR=~/.PersonalTools/utils</span><br><span class="line"></span><br><span class="line">PROJECT_DIR=&quot;/home/ckt/work/xxxxxxx/LINUX/android&quot;</span><br><span class="line">PROJECT_SRC_DIR=&quot;$&#123;PROJECT_DIR&#125;&quot;</span><br><span class="line">PROJECT_OUT_DIR=&quot;$&#123;PROJECT_DIR&#125;/out/target/product/msm8909go&quot;</span><br><span class="line">PROJECT_LUNCH_IDX=29</span><br><span class="line"></span><br><span class="line">SOUNDRECORDER_SRC_DIR=&quot;$&#123;PROJECT_SRC_DIR&#125;/packages/apps/SoundRecorder/&quot;</span><br><span class="line">SOUNDRECORDER_OUT_DIR=&quot;$&#123;PROJECT_OUT_DIR&#125;/system/priv-app/SoundRecorder/&quot;</span><br><span class="line">SOUNDRECORDER_PKG_NAME=com.android.soundrecorder</span><br><span class="line">SOUNDRECORDER_REMOTE_DIR=/system/priv-app/SoundRecorder</span><br><span class="line"></span><br><span class="line">GALLERY_SRC_DIR=&quot;$&#123;PROJECT_SRC_DIR&#125;/packages/apps/Gallery2/&quot;</span><br><span class="line">GALLERY_OUT_DIR=&quot;$&#123;PROJECT_OUT_DIR&#125;/system/app/Gallery2/&quot;</span><br><span class="line">GALLERY_PKG_NAME=com.android.gallery3d</span><br><span class="line">GALLERY_REMOTE_DIR=/system/app/Gallery2</span><br><span class="line"></span><br><span class="line">SNAPDRAGONMUSIC_SRC_DIR=&quot;$&#123;PROJECT_SRC_DIR&#125;/packages/apps/Music/&quot;</span><br><span class="line">SNAPDRAGONMUSIC_OUT_DIR=&quot;$&#123;PROJECT_OUT_DIR&#125;/system/app/Music/&quot;</span><br><span class="line">SNAPDRAGONMUSIC_PKG_NAME=com.android.music</span><br><span class="line">SNAPDRAGONMUSIC_REMOTE_DIR=/system/app/Music</span><br><span class="line"></span><br><span class="line">CLOCK_SRC_DIR=&quot;$&#123;PROJECT_SRC_DIR&#125;/packages/apps/DeskClock&quot;</span><br><span class="line">CLOCK_OUT_DIR=&quot;$&#123;PROJECT_OUT_DIR&#125;/system/app/DeskClock&quot;</span><br><span class="line">CLOCK_PKG_NAME=com.android.deskclock</span><br><span class="line">CLOCK_REMOTE_DIR=/system/app/DeskClock</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">	&quot;soundrecorder&quot;	)</span><br><span class="line"><span class="meta">		$</span><span class="bash">&#123;UTILS_DIR&#125;/handleSpecificTask.sh <span class="variable">$2</span> <span class="variable">$&#123;PROJECT_SRC_DIR&#125;</span> <span class="variable">$&#123;SOUNDRECORDER_SRC_DIR&#125;</span> <span class="variable">$&#123;SOUNDRECORDER_OUT_DIR&#125;</span> <span class="variable">$&#123;SOUNDRECORDER_REMOTE_DIR&#125;</span> <span class="variable">$&#123;SOUNDRECORDER_PKG_NAME&#125;</span> <span class="variable">$&#123;PROJECT_LUNCH_IDX&#125;</span></span></span><br><span class="line">		;;</span><br><span class="line">	&quot;gallery&quot;	)</span><br><span class="line"><span class="meta">		$</span><span class="bash">&#123;UTILS_DIR&#125;/handleSpecificTask.sh <span class="variable">$2</span> <span class="variable">$&#123;PROJECT_SRC_DIR&#125;</span> <span class="variable">$&#123;GALLERY_SRC_DIR&#125;</span> <span class="variable">$&#123;GALLERY_OUT_DIR&#125;</span> <span class="variable">$&#123;GALLERY_REMOTE_DIR&#125;</span> <span class="variable">$&#123;GALLERY_PKG_NAME&#125;</span> <span class="variable">$&#123;PROJECT_LUNCH_IDX&#125;</span></span></span><br><span class="line">		;;</span><br><span class="line">	&quot;music&quot;	)</span><br><span class="line"><span class="meta">		$</span><span class="bash">&#123;UTILS_DIR&#125;/handleSpecificTask.sh <span class="variable">$2</span> <span class="variable">$&#123;PROJECT_SRC_DIR&#125;</span> <span class="variable">$&#123;SNAPDRAGONMUSIC_SRC_DIR&#125;</span> <span class="variable">$&#123;SNAPDRAGONMUSIC_OUT_DIR&#125;</span> <span class="variable">$&#123;SNAPDRAGONMUSIC_REMOTE_DIR&#125;</span> <span class="variable">$&#123;SNAPDRAGONMUSIC_PKG_NAME&#125;</span> <span class="variable">$&#123;PROJECT_LUNCH_IDX&#125;</span></span></span><br><span class="line">		;;</span><br><span class="line">	&quot;clock&quot; ) </span><br><span class="line"><span class="meta">		$</span><span class="bash">&#123;UTILS_DIR&#125;/handleSpecificTask.sh <span class="variable">$2</span> <span class="variable">$&#123;PROJECT_SRC_DIR&#125;</span> <span class="variable">$&#123;CLOCK_SRC_DIR&#125;</span> <span class="variable">$&#123;CLOCK_OUT_DIR&#125;</span> <span class="variable">$&#123;CLOCK_REMOTE_DIR&#125;</span> <span class="variable">$&#123;CLOCK_PKG_NAME&#125;</span> <span class="variable">$&#123;PROJECT_LUNCH_IDX&#125;</span></span></span><br><span class="line">		;;</span><br><span class="line">	* )</span><br><span class="line"><span class="meta">		$</span><span class="bash">&#123;UTILS_DIR&#125;/tipWhenParametersError.sh soundrecorder gallery music clock</span></span><br><span class="line">		;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>目前这些脚本对我来说，已无实际用途，不能保证准确性，只是做一个纪念，纪念那段无知却在挣扎的时光。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-17T15:02:27.000Z" title="4/17/2018, 11:02:27 PM">2018-04-17</time>发表</span><span class="level-item"><time dateTime="2021-02-09T03:03:02.616Z" title="2/9/2021, 11:03:02 AM">2021-02-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></span><span class="level-item">7 分钟读完 (大约1053个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/17/acdc45f57935.html">ProjectA 项目辅助脚本档案</a></h1><div class="content"><blockquote>
<p>本文主要记录在做 ProjectA 时用到的 Python 脚本，因为用得频繁，所以做成了脚本，避免重复输命令。</p>
</blockquote>
<p>项目树状结构图如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── CommonTips.py</span><br><span class="line">├── DumpPhotos.py</span><br><span class="line">├── FallWithMask.py</span><br><span class="line">├── OfflineSoRunner.py</span><br><span class="line">└── main.py</span><br></pre></td></tr></table></figure>

<p>它主要的功能是：</p>
<ul>
<li>从 Android 手机拉取照片（需要手机连接到电脑并且安装好 adb 命令）</li>
<li>在 Android 手机上以 shell 的形式跑 so 库算法，一般是在 apk 上运行</li>
<li>这个带 mask 分析已经看不懂是什么意思了</li>
</ul>
<h2 id="入口：main-py"><a href="#入口：main-py" class="headerlink" title="入口：main.py"></a>入口：main.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CommonTips</span><br><span class="line"><span class="keyword">import</span> DumpPhotos</span><br><span class="line"><span class="keyword">import</span> OfflineSoRunner</span><br><span class="line"><span class="keyword">import</span> FallWithMask</span><br><span class="line">sub_model_name = <span class="string">&#x27;Main Menu&#x27;</span></span><br><span class="line">op_info = <span class="string">&#x27;&#x27;&#x27;\n--------------Main Menu--------------</span></span><br><span class="line"><span class="string">| 【0】：Dump照片</span></span><br><span class="line"><span class="string">| 【1】：离线跑算法库</span></span><br><span class="line"><span class="string">| 【2】：带mask分析跌倒视频&#x27;&#x27;&#x27;</span> + CommonTips.tip_ops+<span class="string">&#x27;-------------------------------------\n&#x27;</span></span><br><span class="line">print(op_info)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cmd = <span class="built_in">input</span>(<span class="string">&#x27;（&#x27;</span>+sub_model_name+<span class="string">&#x27;）&#x27;</span>+CommonTips.tip_input_cmd)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> cmd.isdigit():</span><br><span class="line">        cmd = <span class="built_in">int</span>(cmd)</span><br><span class="line">        <span class="keyword">if</span> cmd == <span class="number">0</span>:</span><br><span class="line">            DumpPhotos.main()</span><br><span class="line">        <span class="keyword">elif</span> cmd == <span class="number">1</span>:</span><br><span class="line">            OfflineSoRunner.main()</span><br><span class="line">        <span class="keyword">elif</span> cmd == <span class="number">2</span>:</span><br><span class="line">            FallWithMask.main()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(CommonTips.tip_arg_error)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;h&#x27;</span> == cmd.lower():</span><br><span class="line">            print(op_info)</span><br><span class="line">        <span class="keyword">elif</span> <span class="string">&#x27;q&#x27;</span> == cmd.lower():</span><br><span class="line">            print(CommonTips.tip_quit)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(CommonTips.tip_arg_error)</span><br></pre></td></tr></table></figure>

<h2 id="提示输出：CommonTips-py"><a href="#提示输出：CommonTips-py" class="headerlink" title="提示输出：CommonTips.py"></a>提示输出：CommonTips.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tip_arg_error = <span class="string">&#x27;&#x27;&#x27;--------------------------</span></span><br><span class="line"><span class="string">| X 参数错误，请重新输入！ |</span></span><br><span class="line"><span class="string">--------------------------\n&#x27;&#x27;&#x27;</span></span><br><span class="line">tip_quit = <span class="string">&quot;已退出子模块&quot;</span></span><br><span class="line">tip_input_cmd = <span class="string">&quot;请输入命令：&quot;</span></span><br><span class="line">tip_ops = <span class="string">&#x27;&#x27;&#x27;\n|************************************</span></span><br><span class="line"><span class="string">| 【h】：打印本帮助</span></span><br><span class="line"><span class="string">| 【q】：退出本模块</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="拉取照片：DumpPhotos-py"><a href="#拉取照片：DumpPhotos-py" class="headerlink" title="拉取照片：DumpPhotos.py"></a>拉取照片：DumpPhotos.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> CommonTips</span><br><span class="line"></span><br><span class="line">sub_model_name = <span class="string">&#x27;Dump照片&#x27;</span></span><br><span class="line"></span><br><span class="line">save_path = <span class="string">&quot;C:\\Users\\D22433\\Desktop\\DumpPhotos\\&quot;</span></span><br><span class="line">remote_path = <span class="string">&quot;/sdcard/AlgoTest/&quot;</span></span><br><span class="line"></span><br><span class="line">pull_photo_2_local = <span class="string">&quot;adb pull &quot;</span>+remote_path+<span class="string">&quot; &quot;</span>+save_path</span><br><span class="line">del_local_photos = <span class="string">&quot;del /Q &quot;</span>+save_path+<span class="string">&quot;\\*&quot;</span></span><br><span class="line">del_remote_photos = <span class="string">&#x27;adb shell &quot;rm -rf &#x27;</span>+remote_path+<span class="string">&#x27;/*&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line">op_info = <span class="string">&#x27;&#x27;&#x27;--------------Dump照片--------------</span></span><br><span class="line"><span class="string">| 【0】：从安卓端拉取dump照片至本地</span></span><br><span class="line"><span class="string">| 【1】：删除本地dump照片</span></span><br><span class="line"><span class="string">| 【2】：删除安卓dump照片</span></span><br><span class="line"><span class="string">| 【3】：删除本地&amp;安卓dump照片&#x27;&#x27;&#x27;</span> + CommonTips.tip_ops+<span class="string">&#x27;-----------------------------------&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    print(op_info)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cmd = <span class="built_in">input</span>(<span class="string">&#x27;（&#x27;</span>+sub_model_name+<span class="string">&#x27;）&#x27;</span>+CommonTips.tip_input_cmd)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> cmd.isdigit():</span><br><span class="line">            cmd = <span class="built_in">int</span>(cmd)</span><br><span class="line">            <span class="keyword">if</span> cmd == <span class="number">0</span>:</span><br><span class="line">                os.system(pull_photo_2_local)</span><br><span class="line">            <span class="keyword">elif</span> cmd == <span class="number">1</span>:</span><br><span class="line">                os.system(del_local_photos)</span><br><span class="line">            <span class="keyword">elif</span> cmd == <span class="number">2</span>:</span><br><span class="line">                os.system(del_remote_photos)</span><br><span class="line">            <span class="keyword">elif</span> cmd == <span class="number">3</span>:</span><br><span class="line">                os.system(del_local_photos)</span><br><span class="line">                os.system(del_remote_photos)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(CommonTips.tip_arg_error)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;h&#x27;</span> == cmd.lower():</span><br><span class="line">                print(op_info)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">&#x27;q&#x27;</span> == cmd.lower():</span><br><span class="line">                print(CommonTips.tip_quit)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(CommonTips.tip_arg_error)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h2 id="离线跑-so-库：OfflineSoRunner-py"><a href="#离线跑-so-库：OfflineSoRunner-py" class="headerlink" title="离线跑 so 库：OfflineSoRunner.py"></a>离线跑 so 库：OfflineSoRunner.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> CommonTips</span><br><span class="line"></span><br><span class="line">sub_model_name = <span class="string">&#x27;跑离线算法库&#x27;</span></span><br><span class="line"></span><br><span class="line">model_path_local = <span class="string">&#x27;E:\\ProjectA\\latestModel&#x27;</span></span><br><span class="line">model_path_remote = <span class="string">&#x27;/sdcard/apache/model/&#x27;</span></span><br><span class="line"></span><br><span class="line">exe_path_local = <span class="string">&#x27;E:\\projects\\Android\\projectA_app\\app\\build\\intermediates\\cmake\\debug\\obj\\arm64-v8a\\executor&#x27;</span></span><br><span class="line">exe_path_remote = <span class="string">&#x27;/system/app/&#x27;</span></span><br><span class="line"></span><br><span class="line">so_path_local = <span class="string">&#x27;E:\\ProjectA\\latestLib&#x27;</span></span><br><span class="line">so_path_remote = <span class="string">&#x27;/system/lib64/&#x27;</span></span><br><span class="line"></span><br><span class="line">cmd_push_model = <span class="string">&#x27;adb push &#x27;</span> + model_path_local + <span class="string">&#x27; &#x27;</span> + model_path_remote</span><br><span class="line">cmd_push_exe = <span class="string">&#x27;adb push &#x27;</span> + exe_path_local + <span class="string">&#x27; &#x27;</span> + exe_path_remote</span><br><span class="line">cmd_grant_permission = <span class="string">&#x27;adb shell chmod 777 /system/app/executor&#x27;</span></span><br><span class="line">cmd_push_so = <span class="string">&#x27;adb push &#x27;</span> + so_path_local + <span class="string">&#x27; &#x27;</span> + so_path_remote</span><br><span class="line"></span><br><span class="line">op_info = <span class="string">&#x27;&#x27;&#x27;--------------跑离线算法库--------------</span></span><br><span class="line"><span class="string">| 【0】：推送算法库所需要的数据文件</span></span><br><span class="line"><span class="string">| 【1】：推送算法库so文件</span></span><br><span class="line"><span class="string">| 【2】：推送可执行文件并授予运行权限</span></span><br><span class="line"><span class="string">| 【3】：执行可执行文件</span></span><br><span class="line"><span class="string">|    1 for testing checkFall</span></span><br><span class="line"><span class="string">|    2 for testing detectFaceNumber</span></span><br><span class="line"><span class="string">|    3 for testing extractFaceFeature</span></span><br><span class="line"><span class="string">|    others for quit.&#x27;&#x27;&#x27;</span> + CommonTips.tip_ops + <span class="string">&#x27;----------------------------------------&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    print(op_info)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cmd = <span class="built_in">input</span>(<span class="string">&#x27;（&#x27;</span>+sub_model_name+<span class="string">&#x27;）&#x27;</span>+CommonTips.tip_input_cmd)</span><br><span class="line">        <span class="keyword">if</span> cmd.isdigit():</span><br><span class="line">            cmd = <span class="built_in">int</span>(cmd)</span><br><span class="line">            <span class="keyword">if</span> cmd == <span class="number">0</span>:</span><br><span class="line">                os.system(cmd_push_model)</span><br><span class="line">            <span class="keyword">elif</span> cmd == <span class="number">1</span>:</span><br><span class="line">                os.system(cmd_push_so)</span><br><span class="line">            <span class="keyword">elif</span> cmd == <span class="number">2</span>:</span><br><span class="line">                os.system(cmd_push_exe)</span><br><span class="line">                os.system(cmd_grant_permission)</span><br><span class="line">            <span class="keyword">elif</span> cmd == <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                    choice = <span class="built_in">input</span>(<span class="string">&quot;测试选项：&quot;</span>)</span><br><span class="line">                    <span class="keyword">if</span> choice == <span class="string">&#x27;1&#x27;</span> <span class="keyword">or</span> choice == <span class="string">&#x27;2&#x27;</span> <span class="keyword">or</span> choice == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">                        <span class="comment"># do something about checkFall</span></span><br><span class="line">                        command = <span class="string">&#x27;adb shell &quot;/system/app/executor &#x27;</span> + choice + <span class="string">&#x27; `ls /sdcard/TestData&#x27;</span> + choice + <span class="string">&#x27;`&quot;&#x27;</span></span><br><span class="line">                        print(command)</span><br><span class="line">                        os.system(command)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(CommonTips.tip_arg_error)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;h&#x27;</span> == cmd.lower():</span><br><span class="line">                print(op_info)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">&#x27;q&#x27;</span> == cmd.lower():</span><br><span class="line">                print(CommonTips.tip_quit)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(CommonTips.tip_arg_error)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h2 id="带-mask-分析：FallWithMask-py"><a href="#带-mask-分析：FallWithMask-py" class="headerlink" title="带 mask 分析：FallWithMask.py"></a>带 mask 分析：FallWithMask.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> CommonTips</span><br><span class="line"></span><br><span class="line">sub_model_name = <span class="string">&#x27;带mask跌倒检测&#x27;</span></span><br><span class="line"></span><br><span class="line">exe_path = <span class="string">&#x27;E:\\ProjectA\\TestVideoWithMask\\TestVideoWithMask.exe&#x27;</span></span><br><span class="line">video_path = <span class="string">&#x27;E:\\ProjectA\\videos&#x27;</span></span><br><span class="line">remote_path = <span class="string">&#x27;/sdcard/LuPingDaShi/Rec/&#x27;</span></span><br><span class="line"></span><br><span class="line">op_info = <span class="string">&#x27;--------------带mask跌倒检测--------------&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="comment"># pull videos</span></span><br><span class="line">    pull = <span class="built_in">input</span>(<span class="string">&quot;是否要从Android拉取视频(y/N):&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> pull == <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">        os.system(<span class="string">&#x27;adb pull &#x27;</span>+remote_path+<span class="string">&#x27; &#x27;</span>+video_path+<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        os.system(<span class="string">&#x27;adb shell rm &#x27;</span>+remote_path+<span class="string">&#x27;* &#x27;</span>)</span><br><span class="line"></span><br><span class="line">    files = os.listdir(video_path)</span><br><span class="line">    print(<span class="string">&quot;可用来测试的视频 :&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> f <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(files)):</span><br><span class="line">        print(<span class="string">&#x27;【&#x27;</span>+<span class="built_in">str</span>(f)+<span class="string">&#x27;】 : &#x27;</span>+files[f])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        idx = <span class="built_in">input</span>(<span class="string">&#x27;（&#x27;</span> + sub_model_name + <span class="string">&#x27;）&#x27;</span> + <span class="string">&quot;请选择序号：&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> idx.isdigit():</span><br><span class="line">            idx = <span class="built_in">int</span>(idx)</span><br><span class="line">            <span class="keyword">if</span> idx &gt;= <span class="built_in">len</span>(files) <span class="keyword">or</span> idx &lt; <span class="number">0</span>:</span><br><span class="line">                print(CommonTips.tip_arg_error+<span class="string">&quot;---数组越界&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                os.system(exe_path + <span class="string">&#x27; &#x27;</span> + video_path + <span class="string">&#x27;\\&#x27;</span> + files[idx]+<span class="string">&#x27; &gt;&gt; log.txt&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;h&#x27;</span> == idx.lower():</span><br><span class="line">                print(op_info)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">&#x27;q&#x27;</span> == idx.lower():</span><br><span class="line">                print(CommonTips.tip_quit)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">elif</span> <span class="string">&#x27;r&#x27;</span> == idx.lower():</span><br><span class="line">                files = os.listdir(video_path)</span><br><span class="line">                print(<span class="string">&quot;可用来测试的视频 :&quot;</span>)</span><br><span class="line">                <span class="keyword">for</span> f <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(files)):</span><br><span class="line">                    print(<span class="string">&#x27;【&#x27;</span> + <span class="built_in">str</span>(f) + <span class="string">&#x27;】 : &#x27;</span> + files[f])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(CommonTips.tip_arg_error)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-16T08:42:10.000Z" title="4/16/2018, 4:42:10 PM">2018-04-16</time>发表</span><span class="level-item"><time dateTime="2022-04-20T16:32:02.584Z" title="4/21/2022, 12:32:02 AM">2022-04-21</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Spring%E7%B3%BB%E5%88%97/">Spring系列</a></span><span class="level-item">7 分钟读完 (大约1099个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/16/b7c1af5684ce.html">SpringBoot快速入门笔记</a></h1><div class="content">咨询了老哥，做一个系统用哪些东西比较好，给我推荐了Spring Boot。说真的，以前知道有Spring、SpringMVC，虽然还有一大堆东西，但是对Spring Boot还是略为陌生。所以，去搜了搜它的主要功能。总结网上所说，即最大的功能就是简化Spring应用的配置，让上手更容易。使用Mave</div><a class="article-more button is-small is-size-7" href="/2018/04/16/b7c1af5684ce.html#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-14T23:55:11.000Z" title="4/15/2018, 7:55:11 AM">2018-04-15</time>发表</span><span class="level-item"><time dateTime="2021-02-09T03:03:35.347Z" title="2/9/2021, 11:03:35 AM">2021-02-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></span><span class="level-item">6 分钟读完 (大约850个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/15/f50fde222d04.html">MyEclipse中Maven的配置与使用</a></h1><div class="content"><p>Maven可以帮你搞定一些项目上的包依赖，与Android Studio中的Gradle有点类似，当然也有很大的不一样。目前认识还是有点粗浅，期待后续的深入。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>虽然MyEclipse上面也集成了Maven，但是版本比官网上的低一些。从官网上面下载最新的软件包，找个合适的位置解压，然后在环境变量中加入所解压目录下的bin目录。<br><img src="/images/pics/ba23ff4b10064b2e37d09e72869fe40e.jpg" alt="这里写图片描述"></p>
<p>具体的配置方式，视不同的<code>Shell</code>，修改不同的配置文件。再此处为<code>zsh</code>，修改了<code>~/.zshrc</code>的内容如下：<br><img src="/images/pics/5dbf2caa5cc88c0e6a627cc444cae779.jpg" alt="这里写图片描述"><br>检查配置是否成功<br><img src="/images/pics/ea5d678efaf83609bfcfa0934d39a651.jpg" alt="这里写图片描述"><br>还需要修改conf目录下的<code>setting.xml</code>文件的<code>localRepository</code>的路径。从注释我们可以看到，如果不设置的话，默认是在<code>~/.m2/repository</code>目录下。该目录的主要功能就是存放Maven从仓库里面下下来的包。<br><img src="/images/pics/a3fdf745752e8ccbea690e376c9456fa.jpg" alt="这里写图片描述"></p>
<p>接下来在MyEclipse中集成我们下载后解压的Maven。打开<code>Preference</code>，依次选择<code>Maven</code>中的<code>Installations</code>与<code>User Settings</code>，添加Maven的路径以及配置文件后如下：<br><img src="/images/pics/78062af7432636d2e8ec6b0709dd2036.jpg" alt="这里写图片描述"><br><img src="/images/pics/47fc73b3758155409c024410b957770b.jpg" alt="这里写图片描述"></p>
<p>到此基本配置完成。</p>
<h2 id="创建Maven项目"><a href="#创建Maven项目" class="headerlink" title="创建Maven项目"></a>创建Maven项目</h2><p>看<a target="_blank" rel="noopener" href="https://www.cnblogs.com/banning/p/6263228.html">网上的博客</a>，创建Maven项目的方式有很多，尚不清楚它们会不会有什么差异。不过能达到使用Maven的功能就没差了吧。</p>
<p><strong><em>第一次创建Maven项目时，它从服务器上面下载jar包会花费很长的时间，请耐心等待</em></strong></p>
<h3 id="方法一：创建JavaWeb项目同时添加Maven支持"><a href="#方法一：创建JavaWeb项目同时添加Maven支持" class="headerlink" title="方法一：创建JavaWeb项目同时添加Maven支持"></a>方法一：创建JavaWeb项目同时添加Maven支持</h3><p>感觉这种方法流程较简单。创建流程如下：<br>New一个<code>Web Project</code>，然后勾上<code>Add Maven Support</code>选项<br><img src="/images/pics/956b9e30afd718c4d9480d7b81b42a5a.jpg" alt="这里写图片描述"><br>重复选择下一步，直到出现Maven的相关设置。这里被建议选择<code>Standard Maven JEE project structure</code>。其实就是项目的目录结构不一样。之后，选择到Finish即可完成创建。<br><img src="/images/pics/99de623a5f91721621160d8a40df6048.jpg" alt="这里写图片描述"><br>创建后如下，但是请注意啊，这已经是第二次创建了。所以再重复一下：<br><strong><em>第一次创建Maven项目时，它从服务器上面下载jar包会花费很长的时间，请耐心等待</em></strong><br><img src="/images/pics/81d6016321dc5161eef745f4628ade3b.jpg" alt="这里写图片描述"></p>
<h3 id="方法二：创建Maven-Web项目"><a href="#方法二：创建Maven-Web项目" class="headerlink" title="方法二：创建Maven Web项目"></a>方法二：创建Maven Web项目</h3><p>选择创建一个<code>Maven Project</code><br><img src="/images/pics/2842377c4a93f7df441bfe82bd522d84.jpg" alt="这里写图片描述"><br>选择创建<br><img src="/images/pics/007cf6cb3e2eac480b417d575a3e089f.jpg" alt="这里写图片描述"><br>后续按实际需求填写即可</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>在该项目的<code>pom.xml</code>中添加依赖信息，然后点击<code>Build Project</code>，Maven就会把相关的依赖信息都找齐到本项目中。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-08T06:58:12.000Z" title="4/8/2018, 2:58:12 PM">2018-04-08</time>发表</span><span class="level-item"><time dateTime="2021-02-09T03:03:41.962Z" title="2/9/2021, 11:03:41 AM">2021-02-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">10 分钟读完 (大约1519个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/08/3ddbaba2d194.html">Service使用笔记</a></h1><div class="content"><blockquote>
<p>看过好几回了，但是还是好像每次都忘，可能是用得少，但是工作中看的一些源代码中用的太多了，可是每次用的时候都看一遍，有点浪费时间，还是自己做一个简单的总结，这样可能以后会快一些。</p>
</blockquote>
<p>这篇在草稿箱里实在是存太久了。。。</p>
<hr>
<h2 id="Service的分类"><a href="#Service的分类" class="headerlink" title="Service的分类"></a>Service的分类</h2><ul>
<li><p>启动型<br>通过调用<code>startService() </code>启动，一旦启动，服务即可在后台无限期运行，即使启动服务的组件已被销毁也不受影响。 已启动的服务通常是执行单一操作，而且不会将结果返回给调用方。</p>
</li>
<li><p>绑定型<br>通过调用<code>bindService()</code> 绑定到服务，服务即处于“绑定”状态。绑定服务提供了一个客户端-服务器接口，允许组件与服务进行交互、发送请求、获取结果，甚至是利用进程间通信 (IPC) 跨进程执行这些操作。 <em>仅当与另一个应用组件绑定时，绑定服务才会运行; 多个组件可以同时绑定到该服务，但全部取消绑定后，该服务即会被销毁</em>。</p>
</li>
</ul>
<p><strong>服务在其托管进程的主线程中运行，它既不创建自己的线程，也不在单独的进程中运行（除非另行指定）。</strong></p>
<h2 id="Service的生命周期"><a href="#Service的生命周期" class="headerlink" title="Service的生命周期"></a>Service的生命周期</h2><p>因为其分两类,所以它的生命周期也有两种:<br><img src="/images/pics/229b707972264550169d216ae68710f1.png" alt="图片1"></p>
<p>左边为启动型, 右边为绑定型.</p>
<h2 id="Service在清单文件中的属性"><a href="#Service在清单文件中的属性" class="headerlink" title="Service在清单文件中的属性"></a>Service在清单文件中的属性</h2><ul>
<li><code>android:exported</code>: 顾名思义,是否可以被导出,即是否可以被绑定用做服务端.<br><code> false</code>:确保服务仅适用于您的应用.<br><code>true</code>: 与false相反.</li>
</ul>
<p>请始终使用<strong>显式 Intent 启动</strong>或绑定 Service，且<strong>不要为服务声明 Intent 过滤器</strong>。</p>
<h2 id="启动型Service"><a href="#启动型Service" class="headerlink" title="启动型Service"></a>启动型Service</h2><h3 id="继承Service"><a href="#继承Service" class="headerlink" title="继承Service"></a>继承<code>Service</code></h3><p>若使用这种方法,则需要注意一个问题,那就是**<code>Service</code>默认的线程是主线程**, 不要在其中做耗时的事情.</p>
<h3 id="继承IntentService"><a href="#继承IntentService" class="headerlink" title="继承IntentService"></a>继承<code>IntentService</code></h3><p>使用这种方法, 就不需要担心线程的问题.因为其做为一个对<code>Service</code>的简单封装,它内部已经将所有的事件都放在了子线程中.不妨对其做一个简单的分析来加深对<code>Service</code>的理解.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate();</span><br><span class="line">    HandlerThread thread = </span><br><span class="line">	    <span class="keyword">new</span> HandlerThread(<span class="string">&quot;IntentService[&quot;</span> + mName + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">    thread.start();</span><br><span class="line"></span><br><span class="line">    mServiceLooper = thread.getLooper();</span><br><span class="line">    mServiceHandler = <span class="keyword">new</span> ServiceHandler(mServiceLooper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在其<code>onCreate()</code>中,将开启一个初始化好<code>Looper</code>的子线程. 并为这个<code>Looper</code>的消息队列添加一个<code>Handler</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//IntentService.java</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceHandler</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ServiceHandler</span><span class="params">(Looper looper)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(looper);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">        onHandleIntent((Intent)msg.obj);</span><br><span class="line">        stopSelf(msg.arg1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WorkerThread</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onHandleIntent</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="meta">@Nullable</span> Intent intent)</span></span>;</span><br></pre></td></tr></table></figure>
<p>其中的<code>Handler</code>用来处理在这个子线程中的事务,其中的<code>onHandleIntent()</code>正是我们在继承<code>IntentService</code>时所需要实现的一个方法, 也就是说我们在其中写的方法都是在子线程中执行.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">(<span class="meta">@Nullable</span> Intent intent, <span class="keyword">int</span> startId)</span> </span>&#123;</span><br><span class="line">    Message msg = mServiceHandler.obtainMessage();</span><br><span class="line">    msg.arg1 = startId;</span><br><span class="line">    msg.obj = intent;</span><br><span class="line">    mServiceHandler.sendMessage(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * You should not override this method for your IntentService. Instead,</span></span><br><span class="line"><span class="comment"> * override &#123;<span class="doctag">@link</span> #onHandleIntent&#125;, which the system calls when the IntentService</span></span><br><span class="line"><span class="comment"> * receives a start request.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> android.app.Service#onStartCommand</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span><span class="params">(<span class="meta">@Nullable</span> Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId)</span> </span>&#123;</span><br><span class="line">    onStart(intent, startId);</span><br><span class="line">    <span class="keyword">return</span> mRedelivery ? START_REDELIVER_INTENT : START_NOT_STICKY;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>onStart()</code>并没有太大的意义，只是一个普通的函数，重要的是它里面做的事情。它将从<code>onStartCommand()</code>里面得到的intent，通过message传递给handler，然后再是自己，对不同intent的处理。</p>
<p>对<code>onStartCommand()</code>的返回值，有下面三种：</p>
<ul>
<li><code>START_NOT_STICKY</code><br>如果系统在 onStartCommand() 返回后终止服务，则除非有挂起 Intent 要传递，否则系统不会重建服务。这是最安全的选项，可以避免在不必要时以及应用能够轻松重启所有未完成的作业时运行服务。</li>
<li><code>START_STICKY</code><br>如果系统在 onStartCommand() 返回后终止服务，则会重建服务并调用 onStartCommand()，但不会重新传递最后一个 Intent。相反，除非有挂起 Intent 要启动服务（在这种情况下，将传递这些 Intent ），否则系统会通过空 Intent 调用 onStartCommand()。这适用于不执行命令、但无限期运行并等待作业的媒体播放器（或类似服务）。</li>
<li><code>START_REDELIVER_INTENT</code><br>如果系统在 onStartCommand() 返回后终止服务，则会重建服务，并通过传递给服务的最后一个 Intent 调用 onStartCommand()。任何挂起 Intent 均依次传递。这适用于主动执行应该立即恢复的作业（例如下载文件）的服务。</li>
</ul>
<h3 id="如何停止"><a href="#如何停止" class="headerlink" title="如何停止"></a>如何停止</h3><p>启动服务必须管理自己的生命周期。也就是说，除非系统必须回收内存资源，否则系统不会停止或销毁服务，而且服务在 onStartCommand() 返回后会继续运行。<br>因此，服务必须通过调用<code>stopSelf() </code>自行停止运行，或者由另一个组件通过调用 <code>stopService() </code>来停止它。一旦请求使用 stopSelf() 或 stopService() 停止服务，系统就会尽快销毁服务。</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/baidu_31405631/article/details/52469093">http://blog.csdn.net/baidu_31405631/article/details/52469093</a></p>
<h2 id="绑定型Service"><a href="#绑定型Service" class="headerlink" title="绑定型Service"></a>绑定型Service</h2><p>对于此种类型的，感觉自己用得到的地方并不是很多，但是要能够看得懂这这种类型的Service的代码，尤其是AIDL，在Android中非常常见。</p>
<p>AIDL的大致使用步骤如下：</p>
<ol>
<li>编写包含接口的aidl文件，make project，生成同名的java文件</li>
<li>AIDL是一种可跨进程的，就是说可以在进程A中，调用进程B中的方法，所以要首先要实现该方法类。实现其中的方法，只需要继承同名java文件中的Stub类，并实现其中的方法，即可。</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-08T06:55:24.000Z" title="4/8/2018, 2:55:24 PM">2018-04-08</time>发表</span><span class="level-item"><time dateTime="2021-02-09T03:03:22.212Z" title="2/9/2021, 11:03:22 AM">2021-02-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></span><span class="level-item">6 分钟读完 (大约964个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/08/e7c7075ec95d.html">设计模式之代理模式</a></h1><div class="content"><p>何为代理模式？代理，顾名思义可联想到代理人，代理人是干啥子的，帮别人做某件事的，且可能会根据一些具体的情况，做一些具体的处理。大概如此吧。</p>
<hr>
<h2 id="定义与作用"><a href="#定义与作用" class="headerlink" title="定义与作用"></a>定义与作用</h2><p>它提供了对目标对象另外的访问方式;即通过代理对象访问目标对象。代理对象是对目标对象的扩展,并会调用目标对象。</p>
<p><strong>好处</strong>：可以在目标对象实现的基础上,增强额外的功能操作,即扩展目标对象的功能.</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h4 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h4><p>简而言之，就是<strong>代理对象</strong>与<strong>被代理对象</strong>都实现同一接口，在<strong>代理对象</strong>中，调用被代理对象的相应方法，并加上一些自定义的其它操作，要使用<strong>被代理对象</strong>的方法时，只需要调用<strong>代理对象</strong>的相应方法即可。</p>
<p>缺点：如果增加接口中的方法，那么<strong>代理对象</strong>以及<strong>被代理对象</strong>都需要进行相应的修改，难以维护。</p>
<h4 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h4><p><strong>不需要实现接口</strong>，利用JDK的API，在内存中动态地创建<strong>代理对象</strong>。<strong>代理对象</strong>不需要实现接口,但是<strong>被代理对象</strong>一定要实现接口,否则不能用动态代理。</p>
<p>代理类所在包:<code>java.lang.reflect.Proxy</code><br>JDK实现代理只需要使用<code>newProxyInstance</code>方法,但是该方法需要接收三个参数,完整的写法是:</p>
<p><code>static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces,InvocationHandler h )</code><br>其中三个参数的含义依次为:</p>
<ul>
<li><code>ClassLoader loader,</code>:指定当前目标对象使用类加载器,获取加载器的方法是固定的</li>
<li> <code>Class&lt;?&gt;[] interfaces,</code>:目标对象实现的接口的类型,使用泛型方式确认类型</li>
<li><code>InvocationHandler h</code>:事件处理,执行目标对象的方法时,会触发事件处理器的方法,会把当前执行目标对象的方法作为参数传入</li>
</ul>
<p>代码示例:</p>
<p>接口类IUserDao.java以及接口实现类,目标对象UserDao是一样的,没有做修改.在这个基础上,增加一个代理工厂类(ProxyFactory.java),将代理类写在这个地方,然后在测试类(需要使用到代理的代码)中先建立目标对象和代理对象的联系,然后代用代理对象的中同名方法</p>
<p>代理工厂类:<code>ProxyFactory.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建动态代理对象</span></span><br><span class="line"><span class="comment"> * 动态代理不需要实现接口,但是需要指定接口类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyFactory</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//维护一个目标对象</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyFactory</span><span class="params">(Object target)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target=target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//给目标对象生成代理对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getProxyInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(</span><br><span class="line">                target.getClass().getClassLoader(),</span><br><span class="line">                target.getClass().getInterfaces(),</span><br><span class="line">                <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;开始事务2&quot;</span>);</span><br><span class="line">                        <span class="comment">//执行被代理对象方法</span></span><br><span class="line">                        Object returnValue = method.invoke(target, args);</span><br><span class="line">                        System.out.println(<span class="string">&quot;提交事务2&quot;</span>);</span><br><span class="line">                        <span class="keyword">return</span> returnValue;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类:App.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 目标对象</span></span><br><span class="line">        IUserDao target = <span class="keyword">new</span> UserDao();</span><br><span class="line">        <span class="comment">// 【原始的类型 class cn.itcast.b_dynamic.UserDao】</span></span><br><span class="line">        System.out.println(target.getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 给目标对象，创建代理对象</span></span><br><span class="line">        IUserDao proxy = (IUserDao) <span class="keyword">new</span> ProxyFactory(target).getProxyInstance();</span><br><span class="line">        <span class="comment">// class $Proxy0   内存中动态生成的代理对象</span></span><br><span class="line">        System.out.println(proxy.getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 执行方法   【代理对象】</span></span><br><span class="line">        proxy.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>其实对于上面的写法，有一个小小的疑问，如果接口中存在多个函数，那么这种做法是会为很一个函数都执行相同的附加操作，如果对每个函数做不同的操作呢？利用<code>Method</code>的属性加以区别，然后对每个函数做分别处理？这样处理可以不。。</p>
<hr>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/cenyu/p/6289209.html">https://www.cnblogs.com/cenyu/p/6289209.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-04-07T07:39:49.000Z" title="4/7/2018, 3:39:49 PM">2018-04-07</time>发表</span><span class="level-item"><time dateTime="2021-02-09T03:04:05.185Z" title="2/9/2021, 11:04:05 AM">2021-02-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">8 分钟读完 (大约1260个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/07/2983ade087a2.html">ButterKnife官方使用指南</a></h1><div class="content"><p>看到了<code>ButterKnife</code>之后，感觉它实在是太棒了，可以省略掉一大堆无趣的<code>findViewById()</code>，整个代码看起来都舒服多了。这篇使用说明来自它的官方网站的简易介绍，用起来非常简单，但是也是有挺多的情况，所以还是觉得自己翻译出来，方便以后查阅吧！</p>
<hr>
<p>使用<code>@BindView</code>和<code>ID</code>注解相应的变量，<code>ButterKnife</code>就会在你的<code>layout</code>文件中找到所对应的<code>View</code>并赋值给它。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">  <span class="meta">@BindView(R.id.title)</span> TextView title;</span><br><span class="line">  <span class="meta">@BindView(R.id.subtitle)</span> TextView subtitle;</span><br><span class="line">  <span class="meta">@BindView(R.id.footer)</span> TextView footer;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.simple_activity);</span><br><span class="line">    ButterKnife.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">// TODO Use fields...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面例子中，所生成的代码大致与下面代码等同：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bind</span><span class="params">(ExampleActivity activity)</span> </span>&#123;</span><br><span class="line">  activity.subtitle = (android.widget.TextView) activity.findViewById(<span class="number">2130968578</span>);</span><br><span class="line">  activity.footer = (android.widget.TextView) activity.findViewById(<span class="number">2130968579</span>);</span><br><span class="line">  activity.title = (android.widget.TextView) activity.findViewById(<span class="number">2130968577</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="资源绑定"><a href="#资源绑定" class="headerlink" title="资源绑定"></a>资源绑定</h2><p>使用<code>@BindBool</code>, <code>@BindColor</code>, <code>@BindDimen</code>, <code>@BindDrawable</code>, <code>@BindInt</code>, <code>@BindString</code>与一个对应的<code>ID</code>来绑定定义好的资源，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">  <span class="meta">@BindString(R.string.title)</span> String title;</span><br><span class="line">  <span class="meta">@BindDrawable(R.drawable.graphic)</span> Drawable graphic;</span><br><span class="line">  <span class="meta">@BindColor(R.color.red)</span> <span class="keyword">int</span> red; <span class="comment">// int or ColorStateList field</span></span><br><span class="line">  <span class="meta">@BindDimen(R.dimen.spacer)</span> Float spacer; <span class="comment">// int (for pixel size) or float (for exact value) field</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="非ACTIVITY绑定"><a href="#非ACTIVITY绑定" class="headerlink" title="非ACTIVITY绑定"></a>非ACTIVITY绑定</h2><p>我们还可以在已知<code>View</code>的情况下，在任意的对象中，绑定该<code>View</code>中所含有的控件。比如在<code>Fragment</code>中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FancyFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line">  <span class="meta">@BindView(R.id.button1)</span> Button button1;</span><br><span class="line">  <span class="meta">@BindView(R.id.button2)</span> Button button2;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    View view = inflater.inflate(R.layout.fancy_fragment, container, <span class="keyword">false</span>);</span><br><span class="line">    ButterKnife.bind(<span class="keyword">this</span>, view);</span><br><span class="line">    <span class="comment">// TODO Use fields...</span></span><br><span class="line">    <span class="keyword">return</span> view;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外一个是在<code>ViewHolder</code>中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View view, ViewGroup parent)</span> </span>&#123;</span><br><span class="line">    ViewHolder holder;</span><br><span class="line">    <span class="keyword">if</span> (view != <span class="keyword">null</span>) &#123;</span><br><span class="line">      holder = (ViewHolder) view.getTag();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      view = inflater.inflate(R.layout.whatever, parent, <span class="keyword">false</span>);</span><br><span class="line">      holder = <span class="keyword">new</span> ViewHolder(view);</span><br><span class="line">      view.setTag(holder);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    holder.name.setText(<span class="string">&quot;John Doe&quot;</span>);</span><br><span class="line">    <span class="comment">// etc...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> view;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> </span>&#123;</span><br><span class="line">    <span class="meta">@BindView(R.id.title)</span> TextView name;</span><br><span class="line">    <span class="meta">@BindView(R.id.job_title)</span> TextView jobTitle;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ViewHolder</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">      ButterKnife.bind(<span class="keyword">this</span>, view);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="其它的绑定方式"><a href="#其它的绑定方式" class="headerlink" title="其它的绑定方式"></a>其它的绑定方式</h2><p>可使用<code>Activity</code>当做一个根<code>View</code>可以绑定任何对象。如果你使用了<code>MVC</code>模式，你可以使用<code>ButterKnife.bind(this, activity)</code>来绑定<code>Controller</code>。<br>可使用<code>ButterKnife.bind(this)</code>来绑定一个<code>View</code>里面的子<code>View</code>。如果你在<code>layout</code>文件中使用了<code>&lt;merge&gt;</code>标签并且在<code>View</code>的构造器中填充，你可以在这之后立马调用它。或者，你也可以在<code>onFinishInflate()</code>回调中调用。</p>
<h2 id="VIEW-LISTS"><a href="#VIEW-LISTS" class="headerlink" title="VIEW LISTS"></a>VIEW LISTS</h2><p>将所需要的控件，全部填充到一个<code>List</code>中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@BindViews(&#123; R.id.first_name, R.id.middle_name, R.id.last_name &#125;)</span></span><br><span class="line">List&lt;EditText&gt; nameViews;</span><br></pre></td></tr></table></figure>

<p><code>apply()</code>方法可以对<code>List</code>中所有的<code>View</code>执行某个操作。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ButterKnife.apply(nameViews, DISABLE);</span><br><span class="line">ButterKnife.apply(nameViews, ENABLED, <span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>

<p>可以指定一些简单的动作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">static final ButterKnife.Action&lt;View&gt; DISABLE &#x3D; new ButterKnife.Action&lt;View&gt;() &#123;</span><br><span class="line">  @Override public void apply(View view, int index) &#123;</span><br><span class="line">    view.setEnabled(false);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">static final ButterKnife.Setter&lt;View, Boolean&gt; ENABLED &#x3D; new ButterKnife.Setter&lt;View, Boolean&gt;() &#123;</span><br><span class="line">  @Override public void set(View view, Boolean value, int index) &#123;</span><br><span class="line">    view.setEnabled(value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>当然也可以在<code>apply()</code>方法中指定一个<code>Android</code>中控件的属性名。</p>
<p><code>ButterKnife.apply(nameViews, View.ALPHA, 0.0f);</code></p>
<h2 id="绑定LISTENER"><a href="#绑定LISTENER" class="headerlink" title="绑定LISTENER"></a>绑定LISTENER</h2><p>监听器也可以自动配置到相应的<code>View</code>上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OnClick(R.id.submit)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">submit</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// TODO submit data to server...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>监听器函数的参数都是可选的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OnClick(R.id.submit)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">submit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// TODO submit data to server...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>指定一个确定的类型，它将会被自动转换成之。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OnClick(R.id.submit)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHi</span><span class="params">(Button button)</span> </span>&#123;</span><br><span class="line">  button.setText(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还可以为将一个监听器函数，绑定到多个控件上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OnClick(&#123; R.id.door1, R.id.door2, R.id.door3 &#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pickDoor</span><span class="params">(DoorView door)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (door.hasPrizeBehind()) &#123;</span><br><span class="line">    Toast.makeText(<span class="keyword">this</span>, <span class="string">&quot;You win!&quot;</span>, LENGTH_SHORT).show();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Toast.makeText(<span class="keyword">this</span>, <span class="string">&quot;Try again&quot;</span>, LENGTH_SHORT).show();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自定义<code>View</code>时，绑定自己的监听器函数不需要设置<code>ID</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FancyButton</span> <span class="keyword">extends</span> <span class="title">Button</span> </span>&#123;</span><br><span class="line">  <span class="meta">@OnClick</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO do something!</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="重置绑定"><a href="#重置绑定" class="headerlink" title="重置绑定"></a>重置绑定</h2><p><code>Fragment</code>和<code>Activity</code>的生命周期不同。当在<code>Fragment</code>的<code>onCreateView()</code>中使用了绑定，就需要在<code>onDestroyView()</code>中将变量置为<code>null</code>。<code>ButterKnife</code>在调用绑定时会返回一个<code>Unbinder</code>的实例，在适当的生命周期回调中，调用这个实例的<code>unbind()</code>方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FancyFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line">	<span class="meta">@BindView(R.id.button1)</span> Button button1;</span><br><span class="line">	<span class="meta">@BindView(R.id.button2)</span> Button button2;</span><br><span class="line">	<span class="keyword">private</span> Unbinder unbinder;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">		View view = inflater.inflate(R.layout.fancy_fragment, container, <span class="keyword">false</span>);</span><br><span class="line">		unbinder = ButterKnife.bind(<span class="keyword">this</span>, view);</span><br><span class="line">		<span class="comment">// TODO Use fields...</span></span><br><span class="line">		<span class="keyword">return</span> view;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroyView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onDestroyView();</span><br><span class="line">		unbinder.unbind();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="其它绑定"><a href="#其它绑定" class="headerlink" title="其它绑定"></a>其它绑定</h2><p>通常<code>@Bind</code>和监听器绑定都是必须的。如果在目标<code>View</code>中为找到相应<code>ID</code>的控件，则会抛出异常。</p>
<p>为了抑制住这中异常，创建一个可选的绑定，可以使用<code>@Nullable</code>或<code>@Optional</code>来注解变量或方法。</p>
<p>注 : 可使用任何名为<code>@Nullable</code>的注解来注解变量，但推荐Android <code>support-annotations</code>中的<code>@Nullable</code> 。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span> <span class="meta">@BindView(R.id.might_not_be_there)</span> TextView mightNotBeThere;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Optional</span> <span class="meta">@OnClick(R.id.maybe_missing)</span> <span class="function"><span class="keyword">void</span> <span class="title">onMaybeMissingClicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// TODO ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="多方法监听器"><a href="#多方法监听器" class="headerlink" title="多方法监听器"></a>多方法监听器</h2><p>可在注解中加入参数来区分。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OnItemSelected(R.id.list_view)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onItemSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// TODO ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@OnItemSelected(value = R.id.maybe_missing, callback = NOTHING_SELECTED)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onNothingSelected</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// TODO ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><h3 id="GRADLE"><a href="#GRADLE" class="headerlink" title="GRADLE"></a>GRADLE</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">&#x27;com.jakewharton:butterknife:(insert latest version)&#x27;</span></span><br><span class="line">annotationProcessor <span class="string">&#x27;com.jakewharton:butterknife-compiler:(insert latest version)&#x27;</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-03-27T04:47:59.000Z" title="3/27/2018, 12:47:59 PM">2018-03-27</time>发表</span><span class="level-item"><time dateTime="2022-04-20T16:08:19.250Z" title="4/21/2022, 12:08:19 AM">2022-04-21</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">4 分钟读完 (大约594个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/03/27/4a74bf2e6eac.html">通过反射来获取Intent中的Key</a></h1><div class="content">在项目中遇到一种情况，我想通过了解某个Intent里面到底存了哪些数据来解决这个问题。但是我们知道，Intent里面的数据需要知道key才能调用相应的函数取出来，所以如何才能找出这些key呢？通过对Intent代码里面对存数据的观察，我们可以看到，通过putExtra()存的数据，都放在一个叫做mE</div><a class="article-more button is-small is-size-7" href="/2018/03/27/4a74bf2e6eac.html#more">阅读更多</a></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/22/">上一页</a></div><div class="pagination-next"><a href="/page/24/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/22/">22</a></li><li><a class="pagination-link is-current" href="/page/23/">23</a></li><li><a class="pagination-link" href="/page/24/">24</a></li><li><a class="pagination-link" href="/page/25/">25</a></li><li><a class="pagination-link" href="/page/26/">26</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/12/"><span class="level-start"><span class="level-item">十二月 2024</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">二月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">一月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">六月 2023</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">一月 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">八月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">七月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">七月 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">三月 2019</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">二月 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">一月 2019</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">十二月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">十一月 2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">九月 2018</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">八月 2018</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">七月 2018</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">六月 2018</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">五月 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">四月 2018</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">三月 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">二月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">十二月 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/10/"><span class="level-start"><span class="level-item">十月 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">九月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/03/"><span class="level-start"><span class="level-item">三月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/01/"><span class="level-start"><span class="level-item">一月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">十二月 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/2024/12/09/249b2dc63505.html"><img src="/images/pics/5300c911560a8d2e0d745dcaf025d22f.jpg" alt="M系列MacBook连接l2tp时失败的问题修复"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-12-08T16:00:00.000Z">2024-12-09</time></p><p class="title"><a href="/2024/12/09/249b2dc63505.html">M系列MacBook连接l2tp时失败的问题修复</a></p><p class="categories"><a href="/categories/macOS/">macOS</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2024/12/09/e9036e8500f6.html"><img src="/images/thumbnails/rust-lang.png" alt="Rust学习笔记"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-12-08T16:00:00.000Z">2024-12-09</time></p><p class="title"><a href="/2024/12/09/e9036e8500f6.html">Rust学习笔记</a></p><p class="categories"><a href="/categories/Rust/">Rust</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2024/12/09/4948e86c1262.html"><img src="/images/pics/DrRvr9.jpg" alt="Calico证书学习笔记"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-12-08T16:00:00.000Z">2024-12-09</time></p><p class="title"><a href="/2024/12/09/4948e86c1262.html">Calico证书学习笔记</a></p><p class="categories"><a href="/categories/Kubernetes/">Kubernetes</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2024/12/09/6dae87e31dc3.html"><img src="/images/pics/e9f22d889a230bfda8e24c0a981740a8.png" alt="如何在YAML文件中进行优雅地换行"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-12-08T16:00:00.000Z">2024-12-09</time></p><p class="title"><a href="/2024/12/09/6dae87e31dc3.html">如何在YAML文件中进行优雅地换行</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2024/12/09/25470f32f4bb.html"><img src="/images/pics/kubernetes-cka-color.svg" alt="CKS证书学习资料汇编"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-12-08T16:00:00.000Z">2024-12-09</time></p><p class="title"><a href="/2024/12/09/25470f32f4bb.html">CKS证书学习资料汇编</a></p><p class="categories"><a href="/categories/Kubernetes/">Kubernetes</a></p></div></article></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://crisfang.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Cris</span></span><span class="level-right"><span class="level-item tag">crisfang.com</span></span></a></li><li><a class="level is-mobile" href="https://sanyuesha.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">三月沙</span></span><span class="level-right"><span class="level-item tag">sanyuesha.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png" alt="遇寻笔记" height="28"></a><p class="is-size-7"><span>&copy; 2024 遇寻</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="To Find Me" href="https://github.com/eucham"><i class="fab fa-github"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/eucham"><i class="fab fa-linkedin"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>